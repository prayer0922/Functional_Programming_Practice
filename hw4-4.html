<!-- Name: Zixuan You, zyou@ucsc.edu. I have not found programming pair yet. If mandatory, I will try to find one for next homework. -->
<!DOCTYPE html>
<html>
<head>
  <title>HW4</title><meta charset="utf-8">
  <style>
  body,div { background-color: #eee; font-family: sans; padding: 1em; }
  </style>
</head>
<body>
  <form action="#">
    <input type="text" id="from" />
    <select id="fromUnit">
      <option value="c">Celsius</option>
      <option value="f">Fahrenheit</option>
      <option value="k">Kelvin</option>
    </select>
    =
   <input type="text" id="to" /> 
   <select id="toUnit">
      <option value="c">Celsius</option>
      <option value="f">Fahrenheit</option>
      <option value="k">Kelvin</option>
   </select>
  </form>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js">
  </script>
  <script>
  function aTob(degree, fromUnit, toUnit){
    if(isNaN(degree))
      alert("Please input a number.");
    function toCelcius(degree,from){
      if(from == "c")
        return degree;
      else if(from == "f")
        return (degree - 32) * 5 / 9;
      else return degree - 273;
    }
    
    return celsiusTo(toCelcius(degree,fromUnit), toUnit);
    
  }
  function celsiusTo(celsius, toUnit){
    if(isNaN(celsius))
      alert(celsius);
    if(toUnit == "c")
      return celsius;
    else if(toUnit == "f")
      return celsius * 9 / 5 + 32;
    else
      return Number(celsius) + 273;
  }  
    
  function celsiusToFarenheit(celsius) {
    if(isNaN(celsius))
      alert("Please input a number.");
    return celsius * 9 / 5 + 32;
  }

  $(function() {
    // FIXME
    $("#from, #to").keyup(function() {
         if (this.id === "to"){
           $("#from").val(aTob($(this).val(), $("#toUnit").val(), $("#fromUnit").val()));
         }else{
           $("#to").val(aTob($(this).val(), $("#fromUnit").val(), $("#toUnit").val()));
         }  
    });
    $("#toUnit").change(function () {
      $("#to").val(aTob($("#from").val(), $("#fromUnit").val(), $(this).val()));
    });
    $("#fromUnit").change(function () {
      $("#from").val(aTob($("#to").val(), $("#toUnit").val(), $(this).val()));
    });
   
  });
    
   
  
  </script>
</body>
</html>




